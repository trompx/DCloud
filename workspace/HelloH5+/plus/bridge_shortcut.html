<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<meta name="HandheldFriendly" content="true"/>
		<meta name="MobileOptimized" content="320"/>
		<title>Hello H5+</title>
		<script type="text/javascript" src="../js/common.js"></script>
		<script type="text/javascript">
/*
 * 创建快捷方式
 */
function createShortcut(){
/*
 *		Android源代码
 * 
 * 		import android.content.Intent;
 * 		import android.graphics.BitmapFactory;
 * 		import android.graphics.Bitmap;
 * 		import android.app.Activity;
 * 
 * 		// 获取主Activity
 * 		Activity main = this;
 * 		// 创建快捷方式意图
 * 		Intent shortcut = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
 * 		// 设置快捷方式的名称
 * 		shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, "HelloH5+");
 * 		// 设置不可重复创建
 * 		shortcut.putExtra("duplicate",false);
 * 		// 设置快捷方式图标
 * 		Bitmap bitmap = BitmapFactory.decodeFile("/sdcard/icon.png");
 * 		shortcut.putExtra(Intent.EXTRA_SHORTCUT_ICON, bitmap);
 * 		// 设置快捷方式启动执行动作
 * 		Intent action = new Intent(Intent.ACTION_MAIN);
 * 		action.setComponent( main.getComponentName() );
 * 		shortcut.putExtra( Intent.EXTRA_SHORTCUT_INTENT, action );
 * 		// 广播创建快捷方式
 * 		context.sendBroadcast(shortcut);
*/

	// 导入要用到的类对象
	var Intent = plus.android.import("android.content.Intent");
	var BitmapFactory = plus.android.import("android.graphics.BitmapFactory");
	// 获取主Activity
	var main = plus.android.mainActivity();
	// 创建快捷方式意图
	var shortcut = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
	// 设置快捷方式的名称
	shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, "HelloH5+");
	// 设置不可重复创建
	shortcut.putExtra("duplicate",false);
	// 设置快捷方式图标
	var iconPath = plus.io.convertLocalFileSystemURL("_www/icon.png");
	var bitmap = BitmapFactory.decodeFile(iconPath);
	shortcut.putExtra(Intent.EXTRA_SHORTCUT_ICON,bitmap);
	// 设置快捷方式启动执行动作
	var action = new Intent(Intent.ACTION_MAIN);
	action.setComponent(plus.android.invoke(main,"getComponentName"));
	shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT,action);
	// 广播创建快捷方式
	plus.android.invoke(main,"sendBroadcast",shortcut);
}
/*
 * 删除快捷方式
 */
function deleteShortcut(){
/*
 * 		Android源代码
 * 
 * 		// 获取主Activity
 * 		Activity main = this;
 * 		// 创建快捷方式意图
 * 		Intent shortcut = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");
 * 		// 设置快捷方式的名称
 * 		shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME,"HelloH5+");
 * 		// 设置快捷方式启动执行动作
 * 		Intent action = new Intent(Intent.ACTION_MAIN);
 * 		action.setComponent(main.getComponentName());
 * 		shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT,action);
 * 		// 广播删除快捷方式
 * 		main.sendBroadcast(shortcut);
 */

	// 导入要用到的类对象
	var Intent = plus.android.import("android.content.Intent");
	// 获取主Activity
	var main = plus.android.mainActivity();
	// 创建快捷方式意图
	var shortcut = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");
	// 设置快捷方式的名称
	shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, "HelloH5+");
	// 设置快捷方式启动执行动作
	var action = new Intent(Intent.ACTION_MAIN);
	action.setComponent(plus.android.invoke(main,"getComponentName"));
	shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT,action);
	// 广播创建快捷方式
	plus.android.invoke(main,"sendBroadcast",shortcut);
}
		</script>
		<link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8"/>
		<style type="text/css">
		
		</style>
	</head>
	<body>
		<header>
			<div class="nvbt" onclick="back();"><div class="iback"></div></div>
			<div class="nvtt">Android JSB</div>
		</header>
		<div id="dcontent" class="dcontent">
			<br/>
			<div class="button" onclick="createShortcut()">创建桌面快捷方式</div>
			<div class="button" onclick="deleteShortcut()">删除桌面快捷方式</div>
			<br/>
		</div>
		<div id="output">
Android JavaScript Bridge封装一条通过JS语法直接调用Native Java接口通道，通过plus.android可调用几乎所有的系统API。
		</div>
	</body>
</html>